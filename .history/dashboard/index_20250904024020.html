<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحليل الشركات الشرعية | Shariah Companies Analytics Dashboard</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="spinner-container">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">جاري التحميل...</span>
            </div>
            <p class="mt-3">جاري تحميل البيانات...</p>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-gradient-primary fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-chart-line me-2"></i>
                لوحة تحليل الشركات الشرعية
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#overview">
                            <i class="fas fa-home"></i> نظرة عامة
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#markets">
                            <i class="fas fa-chart-pie"></i> الأسواق
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#boards">
                            <i class="fas fa-users"></i> الهيئات الشرعية
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#companies">
                            <i class="fas fa-building"></i> الشركات
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#comparison">
                            <i class="fas fa-balance-scale"></i> المقارنات
                        </a>
                    </li>
                </ul>
                <div class="d-flex align-items-center ms-3">
                    <button id="themeToggle" class="btn btn-outline-light btn-sm">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button id="langToggle" class="btn btn-outline-light btn-sm ms-2">
                        EN
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Overview Section -->
        <section id="overview" class="section-padding">
            <div class="container-fluid">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-dashboard text-primary"></i>
                        نظرة عامة
                    </h2>
                    <p class="section-subtitle">إحصائيات شاملة للشركات المتوافقة مع الشريعة</p>
                </div>

                <!-- Statistics Cards -->
                <div class="row g-4 mb-5">
                    <div class="col-xl-3 col-lg-6">
                        <div class="stat-card card h-100 border-0 shadow-sm hover-lift">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="text-muted mb-2">إجمالي الشركات</h6>
                                        <h2 class="mb-0 counter" id="totalCompanies">0</h2>
                                        <small class="text-success">
                                            <i class="fas fa-arrow-up"></i> +12%
                                        </small>
                                    </div>
                                    <div class="stat-icon bg-primary-soft">
                                        <i class="fas fa-building text-primary"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-6">
                        <div class="stat-card card h-100 border-0 shadow-sm hover-lift">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="text-muted mb-2">السوق الرئيسية (تاسي)</h6>
                                        <h2 class="mb-0 counter" id="tasiCompanies">0</h2>
                                        <small class="text-info">
                                            <i class="fas fa-chart-line"></i> 71.3%
                                        </small>
                                    </div>
                                    <div class="stat-icon bg-info-soft">
                                        <i class="fas fa-chart-area text-info"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-6">
                        <div class="stat-card card h-100 border-0 shadow-sm hover-lift">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="text-muted mb-2">السوق الموازية (نمو)</h6>
                                        <h2 class="mb-0 counter" id="nomuCompanies">0</h2>
                                        <small class="text-warning">
                                            <i class="fas fa-seedling"></i> 28.7%
                                        </small>
                                    </div>
                                    <div class="stat-icon bg-warning-soft">
                                        <i class="fas fa-rocket text-warning"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-6">
                        <div class="stat-card card h-100 border-0 shadow-sm hover-lift">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="text-muted mb-2">الهيئات الشرعية</h6>
                                        <h2 class="mb-0 counter" id="totalBoards">4</h2>
                                        <small class="text-success">
                                            <i class="fas fa-check-circle"></i> نشط
                                        </small>
                                    </div>
                                    <div class="stat-icon bg-success-soft">
                                        <i class="fas fa-mosque text-success"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="row g-4">
                    <div class="col-lg-8">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white border-0">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-chart-bar text-primary me-2"></i>
                                    توزيع الشركات حسب الهيئة الشرعية
                                </h5>
                            </div>
                            <div class="card-body">
                                <canvas id="boardDistributionChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white border-0">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-chart-pie text-primary me-2"></i>
                                    توزيع الأسواق
                                </h5>
                            </div>
                            <div class="card-body">
                                <canvas id="marketPieChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Markets Section -->
        <section id="markets" class="section-padding bg-light">
            <div class="container-fluid">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-chart-pie text-primary"></i>
                        تحليل الأسواق
                    </h2>
                    <p class="section-subtitle">مقارنة شاملة بين السوق الرئيسية والسوق الموازية</p>
                </div>

                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-gradient-tasi text-white">
                                <h5 class="mb-0">السوق الرئيسية (تاسي)</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="tasiChart"></canvas>
                                <div class="mt-3">
                                    <div class="progress mb-2">
                                        <div class="progress-bar bg-primary" role="progressbar" style="width: 71.3%">71.3%</div>
                                    </div>
                                    <small class="text-muted">من إجمالي الشركات الشرعية</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-gradient-nomu text-white">
                                <h5 class="mb-0">السوق الموازية (نمو)</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="nomuChart"></canvas>
                                <div class="mt-3">
                                    <div class="progress mb-2">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 28.7%">28.7%</div>
                                    </div>
                                    <small class="text-muted">من إجمالي الشركات الشرعية</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Shariah Boards Section -->
        <section id="boards" class="section-padding">
            <div class="container-fluid">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-users text-primary"></i>
                        الهيئات الشرعية
                    </h2>
                    <p class="section-subtitle">تحليل مفصل للهيئات الشرعية ومعايير الاعتماد</p>
                </div>

                <div class="row g-4 mb-4">
                    <!-- Board Cards -->
                    <div class="col-lg-3 col-md-6">
                        <div class="board-card card h-100 border-0 shadow-sm hover-lift">
                            <div class="card-body text-center">
                                <div class="board-icon mb-3">
                                    <i class="fas fa-landmark fa-3x text-primary"></i>
                                </div>
                                <h5 class="card-title">الراجحي المالية</h5>
                                <div class="board-stats">
                                    <div class="d-flex justify-content-around mt-3">
                                        <div>
                                            <h4 class="text-primary">363</h4>
                                            <small class="text-muted">شركة</small>
                                        </div>
                                        <div>
                                            <h4 class="text-info">243</h4>
                                            <small class="text-muted">تاسي</small>
                                        </div>
                                        <div>
                                            <h4 class="text-warning">120</h4>
                                            <small class="text-muted">نمو</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="board-card card h-100 border-0 shadow-sm hover-lift">
                            <div class="card-body text-center">
                                <div class="board-icon mb-3">
                                    <i class="fas fa-university fa-3x text-success"></i>
                                </div>
                                <h5 class="card-title">د.محمد العصيمي</h5>
                                <div class="board-stats">
                                    <div class="d-flex justify-content-around mt-3">
                                        <div>
                                            <h4 class="text-primary">252</h4>
                                            <small class="text-muted">شركة</small>
                                        </div>
                                        <div>
                                            <h4 class="text-info">160</h4>
                                            <small class="text-muted">تاسي</small>
                                        </div>
                                        <div>
                                            <h4 class="text-warning">92</h4>
                                            <small class="text-muted">نمو</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <span class="badge bg-success">مبلغ التطهير متاح</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="board-card card h-100 border-0 shadow-sm hover-lift">
                            <div class="card-body text-center">
                                <div class="board-icon mb-3">
                                    <i class="fas fa-mosque fa-3x text-info"></i>
                                </div>
                                <h5 class="card-title">تنمية للاستثمار</h5>
                                <div class="board-stats">
                                    <div class="d-flex justify-content-around mt-3">
                                        <div>
                                            <h4 class="text-primary">229</h4>
                                            <small class="text-muted">شركة</small>
                                        </div>
                                        <div>
                                            <h4 class="text-info">209</h4>
                                            <small class="text-muted">تاسي</small>
                                        </div>
                                        <div>
                                            <h4 class="text-warning">20</h4>
                                            <small class="text-muted">نمو</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="board-card card h-100 border-0 shadow-sm hover-lift">
                            <div class="card-body text-center">
                                <div class="board-icon mb-3">
                                    <i class="fas fa-balance-scale fa-3x text-warning"></i>
                                </div>
                                <h5 class="card-title">البلاد المالية</h5>
                                <div class="board-stats">
                                    <div class="d-flex justify-content-around mt-3">
                                        <div>
                                            <h4 class="text-primary">349</h4>
                                            <small class="text-muted">شركة</small>
                                        </div>
                                        <div>
                                            <h4 class="text-info">238</h4>
                                            <small class="text-muted">تاسي</small>
                                        </div>
                                        <div>
                                            <h4 class="text-warning">111</h4>
                                            <small class="text-muted">نمو</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Board Comparison Chart -->
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-white border-0">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-chart-line text-primary me-2"></i>
                            مقارنة الهيئات الشرعية
                        </h5>
                    </div>
                    <div class="card-body">
                        <canvas id="boardComparisonChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Companies Table Section -->
        <section id="companies" class="section-padding bg-light">
            <div class="container-fluid">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-building text-primary"></i>
                        جدول الشركات
                    </h2>
                    <p class="section-subtitle">قائمة تفصيلية بجميع الشركات المتوافقة مع الشريعة</p>
                </div>

                <!-- Filters -->
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label class="form-label">السوق</label>
                                <select id="marketFilter" class="form-select">
                                    <option value="">جميع الأسواق</option>
                                    <option value="تاسي">السوق الرئيسية (تاسي)</option>
                                    <option value="نمو">السوق الموازية (نمو)</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">الهيئة الشرعية</label>
                                <select id="boardFilter" class="form-select">
                                    <option value="">جميع الهيئات</option>
                                    <option value="الراجحي المالية">الراجحي المالية</option>
                                    <option value="د.محمد بن سعود العصيمي">د.محمد العصيمي</option>
                                    <option value="تنمية للاستثمار">تنمية للاستثمار</option>
                                    <option value="البلاد المالية">البلاد المالية</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">القطاع</label>
                                <select id="sectorFilter" class="form-select">
                                    <option value="">جميع القطاعات</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">البحث</label>
                                <input type="text" id="searchInput" class="form-control" placeholder="ابحث عن شركة...">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Companies Table -->
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="companiesTable" class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>رمز الشركة</th>
                                        <th>اسم الشركة</th>
                                        <th>السوق</th>
                                        <th>الهيئة الشرعية</th>
                                        <th>القطاع</th>
                                        <th>مبلغ التطهير</th>
                                        <th>الإجراءات</th>
                                    </tr>
                                </thead>
                                <tbody id="companiesTableBody">
                                    <!-- Data will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Comparison Section -->
        <section id="comparison" class="section-padding">
            <div class="container-fluid">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-balance-scale text-primary"></i>
                        مقارنة الاعتماد الشرعي
                    </h2>
                    <p class="section-subtitle">تحليل الاختلافات في معايير الهيئات الشرعية</p>
                </div>

                <!-- Agreement Matrix -->
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-white border-0">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-th text-primary me-2"></i>
                            مصفوفة الاتفاق بين الهيئات
                        </h5>
                    </div>
                    <div class="card-body">
                        <div id="agreementMatrix" class="agreement-matrix">
                            <!-- Matrix will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Venn Diagram -->
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white border-0">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-circle-notch text-primary me-2"></i>
                                    التداخل بين الهيئات
                                </h5>
                            </div>
                            <div class="card-body">
                                <canvas id="vennDiagram"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white border-0">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-list-ul text-primary me-2"></i>
                                    الشركات المختلف عليها
                                </h5>
                            </div>
                            <div class="card-body">
                                <div id="disputedCompanies" class="disputed-list">
                                    <!-- List will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer bg-dark text-white py-4 mt-5">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-0">© 2025 لوحة تحليل الشركات الشرعية - جميع الحقوق محفوظة</p>
                </div>
                <div class="col-md-6 text-end">
                    <a href="https://github.com/zymawy/shariah-companies" class="text-white me-3">
                        <i class="fab fa-github"></i> GitHub
                    </a>
                    <span class="text-muted">آخر تحديث: <span id="lastUpdate"></span></span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Company Details Modal -->
    <div class="modal fade" id="companyModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="companyModalTitle">تفاصيل الشركة</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="companyModalBody">
                    <!-- Company details will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    <script src="js/app.js"></script>
</body>
</html>